{% extends "base.html" %}
{% block contenido %}
<div class="d-flex justify-content-between align-items-center mb-3">
    <h3>Usuarios</h3>
    <a href="{{ url_for('nuevo_usuario') }}" class="btn btn-success">+ Nuevo Usuario</a>
</div>

<table class="table table-striped table-sm align-middle">
    <thead>
    <tr>
        <th>ID</th>
        <th>Nombre</th>
        <th>Apellido</th>
        <th>Email</th>
        <th>Teléfono</th>
        <th>activo</th>
        <th style="width: 150px;">Acciones</th>
    </tr>
    </thead>
    <tbody>
    {% for u in usuarios %}
        <tr>
            <td>{{ u.id }}</td>
            <td>{{ u.nombre }}</td>
            <td>{{ u.apellido }}</td>
            <td>{{ u.email }}</td>
            <td>{{ u.telefono or '' }}</td>
            <td>
                {% if u.activo %}
                    <span class="badge bg-success">Activo</span>
                {% else %}
                    <span class="badge bg-secondary">Inactivo</span>
                {% endif %}
            </td>
            <td>
                <a href="{{ url_for('editar_usuario', usuario_id=u.id) }}"
                   class="btn btn-sm btn-primary">Editar</a>
                {% if u.activo %}
                    <form method="post"
                          action="{{ url_for('baja_usuario', usuario_id=u.id) }}"
                          style="display:inline-block;"
                          onsubmit="return confirm('¿Dar de baja este usuario?');">
                        <button class="btn btn-sm btn-danger">Baja</button>
                    </form>
                {% endif %}
            </td>
        </tr>
    {% endfor %}
    </tbody>
</table>
{% endblock %}