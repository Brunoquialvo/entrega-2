{% extends "base.html" %}
{% block contenido %}
<h3>
    {% if modo == 'registro' %}
        Registro de cuenta
    {% elif modo == 'nuevo' %}
        Nuevo Usuario
    {% else %}
        Editar Usuario (ID {{ usuario.id }})
    {% endif %}
</h3>

<form method="post" class="mt-3">
    {% if modo == 'nuevo' or modo == 'registro' %}
        <div class="mb-3">
            <label class="form-label">Contraseña *</label>
            <input type="password" name="password" class="form-control" required>
        </div>
    {% endif %}

    <div class="mb-3">
        <label class="form-label">Nombre *</label>
        <input type="text" name="nombre" class="form-control"
               value="{{ usuario.nombre if usuario else '' }}" required>
    </div>
    <div class="mb-3">
        <label class="form-label">Apellido *</label>
        <input type="text" name="apellido" class="form-control"
               value="{{ usuario.apellido if usuario else '' }}" required>
    </div>
    <div class="mb-3">
        <label class="form-label">Email *</label>
        <input type="email" name="email" class="form-control"
               value="{{ usuario.email if usuario else '' }}" required>
    </div>
    <div class="mb-3">
        <label class="form-label">Teléfono</label>
        <input type="text" name="telefono" class="form-control"
               value="{{ usuario.telefono if usuario else '' }}">
    </div>
    <div class="mb-3">
        <label class="form-label">Dirección</label>
        <input type="text" name="direccion" class="form-control"
               value="{{ usuario.direccion if usuario else '' }}">
    </div>

    {% if modo == 'editar' %}
        <div class="form-check mb-3">
            <input class="form-check-input" type="checkbox" name="activo"
                   id="activoCheck" {% if usuario.activo %}checked{% endif %}>
            <label class="form-check-label" for="activoCheck">
                Usuario activo
            </label>
        </div>
    {% endif %}

    <button class="btn btn-primary" type="submit">{% if modo == 'registro' %}Registrarse{% else %}Guardar{% endif %}</button>
    {% if modo == 'registro' %}
        <a href="{{ url_for('login') }}" class="btn btn-secondary">Volver al login</a>
    {% else %}
        <a href="{{ url_for('lista_usuarios') }}" class="btn btn-secondary">Volver</a>
    {% endif %}
</form>
{% endblock %}